##############################################################################
#  HYPRLAND CONFIG — AMD / Arch Linux + UWSM
#  Session manager : uwsm
#  Bar             : ironbar
#  Terminal        : ghostty
#  Launcher        : walker
#  Browser         : zen-browser
#  Notifications   : swaync
#  Screenshot      : hyprshot
#  Color temp      : hyprsunset
#  Idle / Lock     : hypridle + hyprlock
#  Logout          : wlogout
#  OSD             : swayosd
#  Clipboard       : clipse
#  Dock            : nwg-dock-hyprland
#  Switcher        : snappy-switcher
#
#  Drop this file at:  ~/.config/hypr/hyprland.conf
#  Launch via UWSM (from TTY / .bash_profile / .zprofile):
#    if uwsm check may-start && uwsm select; then
#        exec uwsm start default
#    fi
##############################################################################


##############################################################################
# 1. MONITORS
##############################################################################
# Run `hyprctl monitors all` to list available outputs.
# Syntax: monitor = <name>, <resolution>@<hz>, <position>, <scale>

monitor = ,preferred,auto,auto          # catch-all fallback

# ── Named monitor examples ────────────────────────────────────────────────────
# monitor = DP-1,  2560x1440@165, 0x0,    1
# monitor = HDMI-A-1, 1920x1080@60, 2560x0, 1
# monitor = eDP-1, 2560x1600@120, 0x0,    1.6    # HiDPI laptop panel


##############################################################################
# 2. ENVIRONMENT VARIABLES
##############################################################################

# ── AMD / Mesa ────────────────────────────────────────────────────────────────
env = GBM_BACKEND,radeonsi
env = __GLX_VENDOR_LIBRARY_NAME,mesa
env = LIBVA_DRIVER_NAME,radeonsi
env = AMD_VULKAN_ICD,RADV
env = WLR_NO_HARDWARE_CURSORS,1          # set 0 if cursor glitches appear

# ── Wayland session ───────────────────────────────────────────────────────────
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = XDG_CURRENT_DESKTOP,Hyprland

# ── Toolkit backends ──────────────────────────────────────────────────────────
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_QPA_PLATFORMTHEME,qt6ct           # use qt6ct for theming
env = QT_STYLE_OVERRIDE,kvantum            # Kvantum engine for Qt apps
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = MOZ_ENABLE_WAYLAND,1                 # Zen Browser / Firefox
env = ELECTRON_OZONE_PLATFORM_HINT,auto    # Obsidian, Tangram, etc.

# ── Cursor (bibata-cursor-theme-bin) ─────────────────────────────────────────
env = XCURSOR_THEME,Bibata-Modern-Classic
env = XCURSOR_SIZE,24
env = HYPRCURSOR_THEME,Bibata-Modern-Classic
env = HYPRCURSOR_SIZE,24

# ── Fish shell default (for apps that read $SHELL) ────────────────────────────
env = SHELL,/usr/bin/fish


##############################################################################
# 3. AUTOSTART — all via `uwsm app --` for systemd scope tracking
#    After login: `systemctl --user status <appname>` works for each.
##############################################################################

# ── DBus / portal environment propagation ────────────────────────────────────
exec-once = uwsm app -- dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XDG_SESSION_TYPE
exec-once = uwsm app -- systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XDG_SESSION_TYPE

# ── XDG desktop portals ───────────────────────────────────────────────────────
exec-once = uwsm app -- /usr/lib/xdg-desktop-portal-hyprland
exec-once = uwsm app -- /usr/lib/xdg-desktop-portal-gtk

# ── Polkit agent (hyprpolkitagent) ────────────────────────────────────────────
exec-once = uwsm app -- hyprpolkitagent

# ── Wallpaper (hyprpaper) ─────────────────────────────────────────────────────
exec-once = uwsm app -- hyprpaper

# ── Idle daemon (hypridle) ────────────────────────────────────────────────────
exec-once = uwsm app -- hypridle

# ── Night light / colour temperature (hyprsunset) ─────────────────────────────
exec-once = uwsm app -- hyprsunset -t 4500

# ── Notification daemon (swaync) ─────────────────────────────────────────────
exec-once = uwsm app -- swaync

# ── Status bar (ironbar) ─────────────────────────────────────────────────────
exec-once = uwsm app -- ironbar

# ── Dock (nwg-dock-hyprland) ─────────────────────────────────────────────────
exec-once = uwsm app -- nwg-dock-hyprland -p left -i 48 -mb 4 -ml 4 -nolauncher

# ── OSD server (swayosd) — volume & brightness overlay ───────────────────────
exec-once = uwsm app -- swayosd-server

# ── Clipboard manager (clipse) ───────────────────────────────────────────────
exec-once = uwsm app -- clipse -listen

# ── Pipewire idle-inhibit (keeps audio sink active) ───────────────────────────
exec-once = uwsm app -- wayland-pipewire-idle-inhibit

# ── Auto-mount removable media (udiskie) ─────────────────────────────────────
exec-once = uwsm app -- udiskie --tray --automount --notify

# ── Network Manager applet ────────────────────────────────────────────────────
exec-once = uwsm app -- nm-applet --indicator

# ── Bluetooth applet (blueman) ────────────────────────────────────────────────
exec-once = uwsm app -- blueman-applet

# ── Window switcher daemon (snappy-switcher) ──────────────────────────────────
exec-once = uwsm app -- snappy-switcher --daemon


##############################################################################
# 4. LOOK & FEEL
##############################################################################

general {
    gaps_in                  = 5
    gaps_out                 = 12
    border_size              = 2
    col.active_border        = rgba(cba6f7ff) rgba(89b4faff) rgba(f38ba8ff) 30deg
    col.inactive_border      = rgba(313244bb)
    resize_on_border         = true
    extend_border_grab_area  = 10
    allow_tearing            = false    # enable only for fullscreen games
    layout                   = dwindle
}

decoration {
    rounding          = 14
    rounding_power    = 2.0

    active_opacity    = 1.0
    inactive_opacity  = 0.93
    fullscreen_opacity = 1.0

    shadow {
        enabled       = true
        range         = 18
        render_power  = 3
        color         = rgba(1e1e2ecc)
        color_inactive = rgba(1e1e2e77)
    }

    blur {
        enabled            = true
        size               = 10
        passes             = 3
        noise              = 0.02
        contrast           = 0.90
        brightness         = 0.85
        vibrancy           = 0.20
        vibrancy_darkness  = 0.50
        new_optimizations  = true
        xray               = false
        ignore_opacity     = false
    }
}

animations {
    enabled = true

    bezier = easeOut,  0.05, 0.9,  0.1,  1.05
    bezier = easeIn,   0.55, 0,    1,    0.45
    bezier = overshot, 0.13, 0.99, 0.29, 1.12
    bezier = smooth,   0.25, 1,    0.5,  1
    bezier = linear,   0,    0,    1,    1
    bezier = snap,     0.2,  1.4,  0.4,  1

    animation = windows,      1, 4, snap,    slide
    animation = windowsOut,   1, 3, easeIn,  popin 80%
    animation = windowsMove,  1, 3, smooth
    animation = border,       1, 8, default
    animation = borderangle,  1, 9, linear,  loop
    animation = fade,         1, 4, smooth
    animation = fadeIn,       1, 4, smooth
    animation = fadeOut,      1, 3, easeIn
    animation = workspaces,   1, 4, overshot, slide
    animation = specialWorkspace, 1, 4, overshot, slidefadevert 25%
    animation = layers,       1, 3, smooth,  slide top
}

dwindle {
    pseudotile      = false
    preserve_split  = true
    smart_split     = true
    smart_resizing  = true
    force_split     = 0
}

master {
    new_status           = slave
    new_on_top           = false
    mfact                = 0.5
    orientation          = left
    inherit_fullscreen   = true
    always_center_master = false
}

misc {
    disable_hyprland_logo        = true
    disable_splash_rendering     = true
    force_default_wallpaper      = 0
    vrr                          = 2     # 0=off 1=always 2=fullscreen only
    mouse_move_enables_dpms      = true
    key_press_enables_dpms       = true
    animate_manual_resizes       = true
    animate_mouse_windowdragging = true
    new_window_takes_over_fullscreen = 2
    focus_on_activate            = true
    middle_click_paste           = false
}


##############################################################################
# 5. INPUT
##############################################################################

input {
    kb_layout  = us
    kb_variant =
    kb_model   =
    kb_options = caps:escape        # CapsLock acts as Escape
    kb_rules   =

    follow_mouse       = 1
    sensitivity        = 0
    accel_profile      = flat
    force_no_accel     = false
    numlock_by_default = true

    touchpad {
        natural_scroll          = true
        tap-to-click            = true
        tap-and-drag            = true
        drag_lock               = true
        disable_while_typing    = true
        middle_button_emulation = false
        scroll_factor           = 1.0
    }
}

gestures {
    workspace_swipe                    = true
    workspace_swipe_fingers            = 3
    workspace_swipe_distance           = 280
    workspace_swipe_invert             = true
    workspace_swipe_min_speed_to_force = 25
    workspace_swipe_cancel_ratio       = 0.5
    workspace_swipe_create_new         = true
    workspace_swipe_forever            = false
}

cursor {
    no_hardware_cursors      = false
    sync_gsettings_theme     = true
    warp_on_change_workspace = false
}


##############################################################################
# 6. KEYBINDINGS
##############################################################################

$mod = SUPER

# ── Core applications ────────────────────────────────────────────────────────
bind = $mod,        Return,      exec, ghostty
bind = $mod,        B,           exec, zen-browser
bind = $mod,        E,           exec, nautilus
bind = $mod,        Space,       exec, walker
bind = $mod,        N,           exec, swaync-client -t        # toggle notification panel
bind = $mod SHIFT,  N,           exec, swaync-client -C        # clear all notifications

# ── Clipboard (clipse opens in a ghostty popup) ───────────────────────────────
bind = $mod, V,      exec, ghostty --class clipse -e clipse

# ── Colour picker ─────────────────────────────────────────────────────────────
bind = $mod SHIFT, P,            exec, hyprpicker -a

# ── Power / session ───────────────────────────────────────────────────────────
bind = $mod,        Escape,      exec, wlogout -b 4 -c 10 -r 10
bind = $mod SHIFT,  L,           exec, hyprlock
bind = $mod CTRL,   Delete,      exec, uwsm stop

# ── Display brightness (swayosd + brightnessctl) ──────────────────────────────
bindel = , XF86MonBrightnessUp,   exec, swayosd-client --brightness raise
bindel = , XF86MonBrightnessDown, exec, swayosd-client --brightness lower
bindel = $mod, F3,                exec, swayosd-client --brightness raise
bindel = $mod, F2,                exec, swayosd-client --brightness lower

# ── Volume (swayosd + wireplumber) ───────────────────────────────────────────
bindel = , XF86AudioRaiseVolume,  exec, swayosd-client --output-volume raise
bindel = , XF86AudioLowerVolume,  exec, swayosd-client --output-volume lower
bindl  = , XF86AudioMute,         exec, swayosd-client --output-volume mute-toggle
bindl  = , XF86AudioMicMute,      exec, swayosd-client --input-volume mute-toggle

# ── Media playback (playerctl + mpv-mpris) ───────────────────────────────────
bindl = , XF86AudioPlay,    exec, playerctl play-pause
bindl = , XF86AudioNext,    exec, playerctl next
bindl = , XF86AudioPrev,    exec, playerctl previous
bindl = , XF86AudioStop,    exec, playerctl stop

# ── Keyboard backlight ────────────────────────────────────────────────────────
bindl = , XF86KbdBrightnessUp,   exec, swayosd-client --brightness raise --device kbd_backlight
bindl = , XF86KbdBrightnessDown, exec, swayosd-client --brightness lower --device kbd_backlight

# ── Screenshot (hyprshot → ~/Pictures/Screenshots/) ──────────────────────────
bind =              , Print,    exec, hyprshot -m output
bind = $mod,          Print,    exec, hyprshot -m window
bind = $mod SHIFT,    S,        exec, hyprshot -m region
bind = $mod CTRL,     S,        exec, hyprshot -m region --clipboard-only

# ── Night light toggle ────────────────────────────────────────────────────────
bind = $mod CTRL, N,     exec, pkill hyprsunset || uwsm app -- hyprsunset -t 4500

# ── Display / monitor management ─────────────────────────────────────────────
bind = $mod SHIFT, D,    exec, wdisplays
bind = $mod CTRL,  D,    exec, hyprmon

# ── Power control (hyprsunset / hyprpwcenter) ─────────────────────────────────
bind = $mod SHIFT, W,    exec, hyprpwcenter

# ── Window management ─────────────────────────────────────────────────────────
bind = $mod,        Q,          killactive
bind = $mod,        F,          fullscreen, 0
bind = $mod SHIFT,  F,          fullscreen, 1               # fake fullscreen
bind = $mod,        G,          togglegroup
bind = $mod,        Tab,        changegroupactive, f
bind = $mod SHIFT,  Tab,        exec, snappy-switcher       # alt-tab style switcher
bind = $mod,        semicolon,  pseudo                      # dwindle pseudotile
bind = $mod,        backslash,  togglesplit                 # flip dwindle split
bind = $mod,        T,          pin                         # pin floating window
bind = $mod SHIFT,  space,      togglefloating
bind = $mod,        C,          centerwindow                # centre floating window

# ── Focus movement ────────────────────────────────────────────────────────────
bind = $mod, H,     movefocus, l
bind = $mod, L,     movefocus, r
bind = $mod, K,     movefocus, u
bind = $mod, J,     movefocus, d
bind = $mod, left,  movefocus, l
bind = $mod, right, movefocus, r
bind = $mod, up,    movefocus, u
bind = $mod, down,  movefocus, d

# ── Window movement ───────────────────────────────────────────────────────────
bind = $mod SHIFT, H,     movewindow, l
bind = $mod SHIFT, L,     movewindow, r
bind = $mod SHIFT, K,     movewindow, u
bind = $mod SHIFT, J,     movewindow, d
bind = $mod SHIFT, left,  movewindow, l
bind = $mod SHIFT, right, movewindow, r
bind = $mod SHIFT, up,    movewindow, u
bind = $mod SHIFT, down,  movewindow, d

# ── Resize (hold) ─────────────────────────────────────────────────────────────
binde = $mod CTRL, H,     resizeactive, -40 0
binde = $mod CTRL, L,     resizeactive,  40 0
binde = $mod CTRL, K,     resizeactive,  0 -40
binde = $mod CTRL, J,     resizeactive,  0  40
binde = $mod CTRL, left,  resizeactive, -40 0
binde = $mod CTRL, right, resizeactive,  40 0
binde = $mod CTRL, up,    resizeactive,  0 -40
binde = $mod CTRL, down,  resizeactive,  0  40

# ── Move floating window ──────────────────────────────────────────────────────
binde = $mod ALT, H,     moveactive, -40 0
binde = $mod ALT, L,     moveactive,  40 0
binde = $mod ALT, K,     moveactive,  0 -40
binde = $mod ALT, J,     moveactive,  0  40

# ── Workspaces 1-10 ───────────────────────────────────────────────────────────
bind = $mod,       1, workspace, 1
bind = $mod,       2, workspace, 2
bind = $mod,       3, workspace, 3
bind = $mod,       4, workspace, 4
bind = $mod,       5, workspace, 5
bind = $mod,       6, workspace, 6
bind = $mod,       7, workspace, 7
bind = $mod,       8, workspace, 8
bind = $mod,       9, workspace, 9
bind = $mod,       0, workspace, 10

bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9
bind = $mod SHIFT, 0, movetoworkspace, 10

# Silent move (window moves without switching workspace)
bind = $mod CTRL SHIFT, 1, movetoworkspacesilent, 1
bind = $mod CTRL SHIFT, 2, movetoworkspacesilent, 2
bind = $mod CTRL SHIFT, 3, movetoworkspacesilent, 3
bind = $mod CTRL SHIFT, 4, movetoworkspacesilent, 4
bind = $mod CTRL SHIFT, 5, movetoworkspacesilent, 5

# ── Special workspaces (scratchpads) ─────────────────────────────────────────
bind = $mod,       S,   togglespecialworkspace, scratch
bind = $mod SHIFT, S,   movetoworkspace,        special:scratch
bind = $mod,       M,   togglespecialworkspace, music
bind = $mod SHIFT, M,   movetoworkspace,        special:music

# ── Workspace scroll & navigate ──────────────────────────────────────────────
bind  = $mod, mouse_down,    workspace, e+1
bind  = $mod, mouse_up,      workspace, e-1
binde = $mod, bracketright,  workspace, e+1
binde = $mod, bracketleft,   workspace, e-1

# ── Mouse drag & resize ──────────────────────────────────────────────────────
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

# ── Utility ──────────────────────────────────────────────────────────────────
bind = $mod CTRL, R,    exec, hyprctl reload


##############################################################################
# 7. WINDOW RULES
##############################################################################
# Use `hyprctl clients` to find class / title strings.

# ── Floating ─────────────────────────────────────────────────────────────────
windowrule = float, class:^(pavucontrol)$
windowrule = float, class:^(pwvucontrol)$
windowrule = float, class:^(helvum)$
windowrule = float, class:^(nm-connection-editor)$
windowrule = float, class:^(nmgui)$
windowrule = float, class:^(blueman-manager)$
windowrule = float, class:^(blueman-assistant)$
windowrule = float, class:^(overskride)$
windowrule = float, class:^(gnome-calculator)$
windowrule = float, class:^(gnome-disk-utility)$
windowrule = float, class:^(gnome-firmware)$
windowrule = float, class:^(wdisplays)$
windowrule = float, class:^(hyprmon)$
windowrule = float, class:^(hyprpicker)$
windowrule = float, class:^(hyprpwcenter)$
windowrule = float, class:^(localsend)$
windowrule = float, class:^(cameractrls)$
windowrule = float, class:^(czkawka-gui)$
windowrule = float, class:^(loupe)$
windowrule = float, class:^(snapshot)$
windowrule = float, class:^(elephant)$
windowrule = float, class:^(iwgtk)$
windowrule = float, class:^(ventoy)$
windowrule = float, class:^(btrfs-assistant)$
windowrule = float, class:^(qdiskinfo)$
windowrule = float, class:^(xdg-desktop-portal-gtk)$
windowrule = float, class:^(xdg-desktop-portal-hyprland)$
windowrule = float, class:^(wlogout)$
windowrule = float, class:^(snappy-switcher)$
windowrule = float, title:^(File Operation Progress)$
windowrule = float, title:^(Open File)$
windowrule = float, title:^(Save File)$
windowrule = float, title:^(Open Folder)$
windowrule = float, title:^(Picture-in-Picture)$

# ── Float sizing / centering ──────────────────────────────────────────────────
windowrule = size 850 600, class:^(pavucontrol)$
windowrule = size 850 600, class:^(pwvucontrol)$
windowrule = size 700 500, class:^(gnome-calculator)$
windowrule = size 960 680, class:^(localsend)$
windowrule = size 1000 700, class:^(gnome-disk-utility)$
windowrule = size 1100 800, class:^(czkawka-gui)$
windowrule = center,        class:^(pavucontrol)$
windowrule = center,        class:^(pwvucontrol)$
windowrule = center,        class:^(localsend)$
windowrule = center,        class:^(czkawka-gui)$
windowrule = center,        class:^(gnome-disk-utility)$

# ── Opacity ───────────────────────────────────────────────────────────────────
windowrule = opacity 0.95 0.85, class:^(com.mitchellh.ghostty)$
windowrule = opacity 0.97 0.92, class:^(obsidian)$
windowrule = opacity 0.97 0.93, class:^(org.gnome.Nautilus)$
windowrule = opacity 1.0  0.96, class:^(zen)$
windowrule = opacity 1.0  0.96, class:^(zen-alpha)$
windowrule = opacity 0.96 0.88, class:^(org.pwmt.zathura)$
windowrule = opacity 0.96 0.88, class:^(athura)$
windowrule = opacity 0.96 0.90, class:^(planify)$
windowrule = opacity 0.97 0.90, class:^(org.gnome.Papers)$

# ── Clipse (clipboard UI in a ghostty popup) ──────────────────────────────────
windowrule = float,        class:^(clipse)$
windowrule = size 700 500, class:^(clipse)$
windowrule = center,       class:^(clipse)$

# ── Walker launcher ───────────────────────────────────────────────────────────
windowrule = float,       class:^(walker)$
windowrule = center,      class:^(walker)$
windowrule = noborder,    class:^(walker)$
windowrule = noshadow,    class:^(walker)$
windowrule = noanim,      class:^(walker)$
windowrule = stayfocused, class:^(walker)$

# ── Snappy switcher ───────────────────────────────────────────────────────────
windowrule = float,       class:^(snappy-switcher)$
windowrule = center,      class:^(snappy-switcher)$
windowrule = noborder,    class:^(snappy-switcher)$
windowrule = stayfocused, class:^(snappy-switcher)$
windowrule = noanim,      class:^(snappy-switcher)$

# ── Wlogout ───────────────────────────────────────────────────────────────────
windowrule = fullscreen, class:^(wlogout)$
windowrule = noanim,     class:^(wlogout)$
windowrule = dimaround,  class:^(wlogout)$

# ── Loupe image viewer ────────────────────────────────────────────────────────
windowrule = size 1000 700, class:^(org.gnome.Loupe)$
windowrule = center,        class:^(org.gnome.Loupe)$

# ── System monitors ───────────────────────────────────────────────────────────
windowrule = float,  class:^(net.nokyan.Resources)$
windowrule = float,  class:^(io.missioncenter.MissionCenter)$
windowrule = float,  class:^(qdiskinfo)$
windowrule = size 1200 800, class:^(net.nokyan.Resources)$
windowrule = size 1200 800, class:^(io.missioncenter.MissionCenter)$
windowrule = center,        class:^(net.nokyan.Resources)$
windowrule = center,        class:^(io.missioncenter.MissionCenter)$

# ── Idle inhibit ─────────────────────────────────────────────────────────────
windowrule = idleinhibit focus,      class:^(mpv)$
windowrule = idleinhibit fullscreen, class:^(zen)$
windowrule = idleinhibit fullscreen, class:^(zen-alpha)$
windowrule = idleinhibit always,     class:^(cine)$

# ── Gaming — tearing & no blur ───────────────────────────────────────────────
windowrule = immediate,  class:^(steam_app_.*)$
windowrule = fullscreen, class:^(steam_app_.*)$
windowrule = noblur,     class:^(steam_app_.*)$
windowrule = noshadow,   class:^(steam_app_.*)$

# ── Panel / dock — no focus steal ────────────────────────────────────────────
windowrule = nofocus, class:^(ironbar)$
windowrule = nofocus, class:^(nwg-dock-hyprland)$


##############################################################################
# 8. WORKSPACE ASSIGNMENTS
##############################################################################

windowrule = workspace 1,  class:^(com.mitchellh.ghostty)$
windowrule = workspace 2,  class:^(zen)$
windowrule = workspace 2,  class:^(zen-alpha)$
windowrule = workspace 2,  class:^(tangram)$
windowrule = workspace 3,  class:^(obsidian)$
windowrule = workspace 3,  class:^(planify)$
windowrule = workspace 3,  class:^(org.gnome.Papers)$
windowrule = workspace 3,  class:^(org.pwmt.zathura)$
windowrule = workspace 3,  class:^(athura)$
windowrule = workspace 4,  class:^(org.gnome.Nautilus)$
windowrule = workspace 4,  class:^(org.gnome.Baobab)$
windowrule = workspace 4,  class:^(org.gnome.FileRoller)$
windowrule = workspace 5,  class:^(org.telegram.desktop)$
windowrule = workspace 5,  class:^(localsend)$
windowrule = workspace 6,  class:^(com.valvesoftware.Steam)$
windowrule = workspace 7,  class:^(net.nokyan.Resources)$
windowrule = workspace 7,  class:^(io.missioncenter.MissionCenter)$
windowrule = workspace 8,  class:^(com.obsproject.Studio)$
windowrule = workspace 9,  class:^(cameractrls)$
windowrule = workspace 10, class:^(ventoy)$


##############################################################################
# 9. LAYER RULES
##############################################################################

# Ironbar (top bar)
layerrule = animation slide top,  ironbar
layerrule = blur,                  ironbar
layerrule = blurpopups,            ironbar
layerrule = ignorezero,            ironbar

# nwg-dock-hyprland (left dock)
layerrule = animation slide left,  nwg-dock-hyprland
layerrule = blur,                  nwg-dock-hyprland
layerrule = ignorezero,            nwg-dock-hyprland

# swaync notification centre + popups
layerrule = animation slide right, swaync-control-center
layerrule = animation slide right, swaync-notification-window
layerrule = blur,                  swaync-control-center
layerrule = blur,                  swaync-notification-window
layerrule = ignorezero,            swaync-control-center
layerrule = ignorezero,            swaync-notification-window

# SwayOSD overlay (no animation, instant)
layerrule = noanim, swayosd

# Walker
layerrule = blur,       walker
layerrule = ignorezero, walker
layerrule = dimaround,  walker

# Hyprlock
layerrule = blur, hyprlock


##############################################################################
# 10. HYPRIDLE  (~/.config/hypr/hypridle.conf)
##############################################################################
#
# general {
#     lock_cmd        = pidof hyprlock || hyprlock  # don't spawn duplicates
#     before_sleep_cmd = loginctl lock-session
#     after_sleep_cmd  = hyprctl dispatch dpms on
# }
#
# listener {
#     timeout  = 300
#     on-timeout  = brightnessctl -s set 10%
#     on-resume   = brightnessctl -r
# }
# listener {
#     timeout  = 360
#     on-timeout  = loginctl lock-session
# }
# listener {
#     timeout  = 600
#     on-timeout  = systemctl suspend
# }


##############################################################################
# 11. HYPRLOCK  (~/.config/hypr/hyprlock.conf)
##############################################################################
#
# general {
#     grace        = 5
#     no_fade_in   = false
#     disable_loading_bar = false
# }
# background {
#     path         = screenshot
#     blur_passes  = 3
#     blur_size    = 8
#     brightness   = 0.6
# }
# input-field {
#     size         = 300, 50
#     position     = 0, -100
#     halign       = center
#     valign       = center
#     placeholder_text = <i>Password…</i>
#     dots_spacing = 0.3
#     dots_center  = true
#     rounding     = 10
#     fade_on_empty = true
# }
# label {
#     text         = cmd[update:1000] echo "$(date +"%H:%M")"
#     font_size    = 80
#     font_family  = JetBrainsMono Nerd Font
#     position     = 0, 250
#     halign       = center
#     valign       = center
# }


##############################################################################
# 12. HYPRPAPER  (~/.config/hypr/hyprpaper.conf)
##############################################################################
#
# preload  = ~/Pictures/Wallpapers/mocha.png
# wallpaper = ,~/Pictures/Wallpapers/mocha.png
# splash   = false


##############################################################################
# 13. UWSM LAUNCH SETUP
##############################################################################
#
# ── SDDM (recommended) ───────────────────────────────────────────────────────
#   sudo systemctl enable sddm
#   In SDDM session dropdown choose "Hyprland (UWSM)"
#
# ── TTY autostart  (~/.bash_profile or ~/.zprofile or ~/.config/fish/config.fish)
#   # Bash / Zsh:
#   if uwsm check may-start && uwsm select; then
#       exec uwsm start default
#   fi
#
#   # Fish:
#   if uwsm check may-start
#       exec uwsm start hyprland-uwsm.desktop
#   end
#
# ── Useful UWSM / systemd commands ───────────────────────────────────────────
#   systemctl --user status ironbar        # check bar status
#   systemctl --user restart swaync        # restart notif daemon
#   systemctl --user stop hypridle         # temporarily disable idle
#   journalctl --user -xe -u ironbar       # read bar logs
#   uwsm stop                              # cleanly end the Hyprland session
#
##############################################################################
